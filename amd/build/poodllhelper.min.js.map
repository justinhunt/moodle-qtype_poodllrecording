{"version":3,"sources":["../src/poodllhelper.js"],"names":["define","$","log","debug","init","opts","window","prquestion","evt","filename","updatecontrol","prquestionUploaded","CustomEvent","details","document","dispatchEvent","safesave","nextbtn","removeAttr","upc","length","parent","get","value","trigger","savebtn","attr"],"mappings":"AAAAA,OAAM,sCAAC,CAAC,QAAD,CAAW,UAAX,CAAD,CAAyB,SAAUC,CAAV,CAAaC,CAAb,CAAkB,CAC7C,aAEAA,CAAG,CAACC,KAAJ,CAAU,6BAAV,EAEA,MAAO,CAGHC,IAAI,CAAE,cAAUC,CAAV,CAAgB,CA+ClBC,MAAM,CAACC,UAAP,CA9CiB,QAAbA,CAAAA,UAAa,CAAUC,CAAV,CAAe,CAE5B,GAAGA,CAAH,CAAO,CACH,OAAOA,CAAG,CAAC,CAAD,CAAV,EACI,IAAK,eAAL,IACQC,CAAAA,CAAQ,CAAGD,CAAG,CAAC,CAAD,CADtB,CAEQE,CAAa,CAAGF,CAAG,CAAC,CAAD,CAF3B,CAIQG,CAAkB,CAAG,GAAIC,CAAAA,WAAJ,CAAgB,oBAAhB,CAAsC,CAACC,OAAO,CAAEL,CAAV,CAAtC,CAJ7B,CAKIM,QAAQ,CAACC,aAAT,CAAuBJ,CAAvB,EAGA,GAAkB,CAAf,EAAAN,CAAI,CAACW,QAAR,CAAqB,CACjB,GAAIC,CAAAA,CAAO,CAAGhB,CAAC,CAAC,gCAAD,CAAf,CACAgB,CAAO,CAACC,UAAR,CAAmB,UAAnB,CAA+B,UAA/B,CACH,CAGD,GAAIC,CAAAA,CAAG,CAAG,EAAV,CACA,GAA6B,WAAzB,QAAOT,CAAAA,CAAP,EAA0D,EAAlB,GAAAA,CAA5C,CAAkE,CAC9DS,CAAG,CAAGlB,CAAC,CAAC,SAAUS,CAAV,CAA0B,KAA3B,CAGV,CACD,GAAiB,CAAb,CAAAS,CAAG,CAACC,MAAR,CAAoB,CAChBD,CAAG,CAAGlB,CAAC,CAAC,SAAUS,CAAV,CAA0B,KAA3B,CAAiCJ,MAAM,CAACe,MAAP,CAAcP,QAA/C,CACV,CACD,GAAiB,CAAb,CAAAK,CAAG,CAACC,MAAR,CAAoB,CAChBD,CAAG,CAACG,GAAJ,CAAQ,CAAR,EAAWC,KAAX,CAAmBd,CACtB,CAFD,IAEO,CACHP,CAAG,CAACC,KAAJ,CAAU,kBAAV,EACA,QACH,CACDgB,CAAG,CAACK,OAAJ,CAAY,QAAZ,EACA,MACJ,IAAK,SAAL,CAEI,GAAkB,CAAf,EAAAnB,CAAI,CAACW,QAAR,CAAqB,CACjB,GAAIS,CAAAA,CAAO,CAAGxB,CAAC,CAAC,gCAAD,CAAf,CACAwB,CAAO,CAACC,IAAR,CAAa,UAAb,CAAyB,UAAzB,CACH,CAED,MAvCR,CAyCH,CACJ,CAGJ,CApDE,CAuDV,CA5DK,CAAN","sourcesContent":["define([\"jquery\", \"core/log\"], function ($, log) {\n    \"use strict\"; // jshint ;_;\n\n    log.debug(\"poodll helper: initialising\");\n\n    return {\n\n\n        init: function (opts) {\n            var prquestion = function (evt) {\n\n                if(evt){\n                    switch(evt[1]) {\n                        case 'filesubmitted':\n                            var filename = evt[2];\n                            var updatecontrol = evt[3];\n                            // post a custom event that a filter template might be interested in\n                            var prquestionUploaded = new CustomEvent(\"prquestionUploaded\", {details: evt});\n                            document.dispatchEvent(prquestionUploaded);\n\n                            //if opts safe save\n                            if(opts.safesave==1) {\n                                var nextbtn = $('.submitbtns .mod_quiz-next-nav');\n                                nextbtn.removeAttr('disabled', 'disabled');\n                            }\n\n                            //poke the filename\n                            var upc = '';\n                            if (typeof updatecontrol !== 'undefined' && updatecontrol !== '') {\n                                upc = $('[id=\"' + updatecontrol + '\"]');\n                                //the code below used to work until odd chars in question id annoyed jquery 3\n                                //upc = $('#' + uploader.config.updatecontrol);\n                            }\n                            if (upc.length < 1) {\n                                upc = $('[id=\"' + updatecontrol + '\"]', window.parent.document);\n                            }\n                            if (upc.length > 0) {\n                                upc.get(0).value = filename;\n                            } else {\n                                log.debug('upload failed #2');\n                                return false;\n                            }\n                            upc.trigger('change');\n                            break;\n                        case 'started':\n                            //if opts safe save\n                            if(opts.safesave==1) {\n                                var savebtn = $('.submitbtns .mod_quiz-next-nav');\n                                savebtn.attr('disabled', 'disabled');\n                            }\n\n                            break;\n                    }\n                }\n            }; //end of callback function\n            window.prquestion = prquestion;\n\n        } //end of init\n\n    };//end of return object\n});"],"file":"poodllhelper.min.js"}